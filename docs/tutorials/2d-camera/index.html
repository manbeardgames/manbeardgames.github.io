<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<title data-react-helmet="true">2D Camera | ManBeardGames</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="2D Camera | ManBeardGames"><meta data-react-helmet="true" name="description" content="A camera can be an essential part of your game when you need to create game worlds that expand beyond the scope of the game windows width and height. The concept of a camera can seem overwhelming at first, but here we&#x27;ll layout the groundwork as simple as possible in a way that you can expand on to suite your game project&#x27;s needs."><meta data-react-helmet="true" property="og:description" content="A camera can be an essential part of your game when you need to create game worlds that expand beyond the scope of the game windows width and height. The concept of a camera can seem overwhelming at first, but here we&#x27;ll layout the groundwork as simple as possible in a way that you can expand on to suite your game project&#x27;s needs."><meta data-react-helmet="true" property="og:url" content="https://manbeardgames.com/docs/tutorials/2d-camera"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://manbeardgames.com/docs/tutorials/2d-camera"><link rel="stylesheet" href="/styles.50dc20de.css">
<link rel="stylesheet" href="/main.9f6c1dea.css">
<link rel="preload" href="/styles.a004a2b6.js" as="script">
<link rel="preload" href="/runtime~main.34983ed2.js" as="script">
<link rel="preload" href="/main.169cd321.js" as="script">
<link rel="preload" href="/1.45bbbcce.js" as="script">
<link rel="preload" href="/45.2cefdf73.js" as="script">
<link rel="preload" href="/46.81528f9c.js" as="script">
<link rel="preload" href="/f976f453.3f812314.js" as="script">
<link rel="preload" href="/44.5d5b5f92.js" as="script">
<link rel="preload" href="/532d9d9c.d5495cd0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/mbg_cookie.svg" alt="ManBeardGames Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/mbg_cookie.svg" alt="ManBeardGames Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">ManBeardGames</strong></a><a class="navbar__item navbar__link" href="/games/">Games</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/blog">Dev Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/manbeardgames" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub Repository"></a><a href="https://twitter.com/manbeardgames" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Twitter Profile"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/mbg_cookie.svg" alt="ManBeardGames Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/mbg_cookie.svg" alt="ManBeardGames Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">ManBeardGames</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/games/">Games</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/tutorials/">Tutorials</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Dev Blog</a></li><li class="menu__list-item"><a href="https://github.com/manbeardgames" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub Repository"></a></li><li class="menu__list-item"><a href="https://twitter.com/manbeardgames" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Twitter Profile"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">2D Camera</h1></header><div class="markdown"><p>A camera can be an essential part of your game when you need to create game worlds that expand beyond the scope of the game windows width and height. The concept of a camera can seem overwhelming at first, but here we&#x27;ll layout the groundwork as simple as possible in a way that you can expand on to suite your game project&#x27;s needs.</p><p>Creating a camera will require the use of vectors math and matrices math to create a Transformation Matrix. It is beyond the scope of these tutorials to explain the math behind it. If you would like to further research this topic, the article <a href="http://www.alanzucconi.com/2016/02/10/tranfsormation-matrix/#part1" target="_blank" rel="noopener noreferrer">The Transform Matrix For 2D Games</a> is a good starting place. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="project-files"></a>Project Files<a class="hash-link" href="#project-files" title="Direct link to heading">#</a></h2><p>If you would like to follow along with this tutorial using the same files and assets I use, you can find them here on github.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="create-the-camera-class"></a>Create the Camera Class<a class="hash-link" href="#create-the-camera-class" title="Direct link to heading">#</a></h2><p>If you are unfamiliar with the concept of a camera in game development, it is gives us something called a Transformation Matrix, which we can then apply to our rendering. This transformation matrix contains the information to translate, rotate, and scale what we tell to render so that it looks as if we&#x27;re viewing the game from the perspective of the camera. </p><p><img src="/assets/images/tutorial-cover-9709cb146fced47e00b77fbb0b3ac7b5.png"></p><p>To get started, create a new class for your camera, I&#x27;ll call mine <code>Camera2D</code>. Add the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">public class Camera2D</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The transformation matrix of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private Matrix _transformationMatrix = Matrix.Identity;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The inverse of the transformation matrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private Matrix _inverseMatrix = Matrix.Identity;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The xy-coordinate top-left position of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private Vector2 _position = Vector2.Zero;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The rotation of the camera along the Z axis</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private float _rotation = 0;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The x and y zoom level of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private Vector2 _zoom = Vector2.One;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The xy-coordinate origin point of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private Vector2 _origin = Vector2.Zero;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Has the position, angle, origin, or zoom of the camera changed</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    private bool _hasChanged;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  The Viewport reference for the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    public Viewport Viewport;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    ///     Creates a new 2D camera instance</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;viewPort&quot;&gt;The Viewport reference for the camera&lt;/param&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    public Camera2D(Viewport viewPort)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Viewport = viewPort;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    ///     Creates a new 2D camera instance</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;width&quot;&gt;The width of the viewport&lt;/param&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;height&quot;&gt;The height of the viewport&lt;/param&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    public Camera2D(int width, int height)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Viewport = new Viewport();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Viewport.Width = width;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Viewport.Height = height;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>_transformationMatrix</td><td><code>Matrix</code></td><td>This is the matrix that we will calculate in a minute that includes our translation, rotation, and scale information. This will be used by the <code>SpriteBatch</code> when we perform our rendering.</td></tr><tr><td>_inverseMatrix</td><td><code>Matrix</code></td><td>This is the inverse of our transformation matrix.</td></tr><tr><td>_position</td><td><code>Vector2</code></td><td>This is the xy-coordinate position of our camera relative to the top-left of the camera&#x27;s view. In terms of our transformation matrix, this is the <strong>translation</strong>.</td></tr><tr><td>_rotation</td><td><code>float</code></td><td>This is the angle of rotation for our camera. In terms of our transformation matrix, this is the <strong>rotation</strong>.</td></tr><tr><td>_zoom</td><td><code>Vector2</code></td><td>This is the zoom level of the camera. In terms of our transformation matrix, this is the <strong>scale</strong>.</td></tr><tr><td>_origin</td><td><code>Vector2</code></td><td>This is the origin point of our camera. By default, it is Vector2.Zero, which means our camera&#x27;s origin is the top-left.</td></tr><tr><td>_hasChanged</td><td><code>bool</code></td><td>This is a boolean value we&#x27;ll set to true anytime either the position, rotation, or scale of the camera has changed, signifying that we need to update our transformation matrix.</td></tr><tr><td>ViewPort</td><td><code>ViewPort</code></td><td>This is the Viewport reference for our camera.</td></tr></tbody></table><p>After the fields are declared, two constructors are introduced. The first constructor allows us to pass in a reference to an existing <code>ViewPort</code>. This is useful because it allows us to use the Viewport from our Game1 class provided by default by MonoGame. The second constructor allows use to supply a width and height, which will create a viewport reference for use base on these dimensions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="updating-the-matrices"></a>Updating the Matrices<a class="hash-link" href="#updating-the-matrices" title="Direct link to heading">#</a></h2><p>To keep our transformation matrix and inverse matrix updated, we&#x27;ll create a method called <code>UpdateMatrices</code>. Calculating a new transformation matrix is done through the multiplication of a translation matrix of our <code>_position</code>, a rotation matrix of our <code>_rotation</code>, a scale matrix of our <code>_zoom</code>, and an additional translation matrix of our <code>_origin</code>. Once we have each of these individual matrices, we can multiply them all together to get our final <code>_transformationMatrix</code>. Then to get the value of our <code>_inverseMatrix</code>, we just inverse the transformation matrix.</p><p>Add the following method to our Camera2D class</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Updates the values for our transformation matrix and </span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     the inverse matrix.  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private void UpdateMatrices()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Create a translation matrix based on the position of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var positionTranslationMatrix = Matrix.CreateTranslation(new Vector3()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        X = -(int)Math.Floor(_position.X),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Y = -(int)Math.Floor(_position.Y),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Z = 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    });</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Create a rotation matrix around the Z axis</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var rotationMatrix = Matrix.CreateRotationZ(_rotation);</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Create a scale matrix based on the zoom</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var scaleMatrix = Matrix.CreateScale(new Vector3()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        X = _zoom.X,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Y = _zoom.Y,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Z = 1</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    });</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Create a translation matrix based on the origin position of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var originTranslationMatrix = Matrix.CreateTranslation(new Vector3()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        X = (int)Math.Floor(_origin.X),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Y = (int)Math.Floor(_origin.Y),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        Z = 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    });</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Perform matrix multiplication of all of the above to create our</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  transformation matrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    _transformationMatrix = positionTranslationMatrix * rotationMatrix * scaleMatrix * originTranslationMatrix;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Get our inverse matrix of the transformation matrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    _inverseMatrix = Matrix.Invert(_transformationMatrix);</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Since the matrices have now been updated, set that there is no longer a change</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    _hasChanged = false;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>And that&#x27;s it for the hard stuff.  This will keep the transformation and inverse matrix values updated whenever there is a change to the position, rotation, or scale.  Next, we&#x27;ll create the public properties that can be used to retrieve the values needed from the camera to use within the game.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="adding-camera-properties"></a>Adding Camera Properties<a class="hash-link" href="#adding-camera-properties" title="Direct link to heading">#</a></h2><hr><p>The first two properties that we are going to add are for the TransformationMatrix and the InverseMatrix.  Add the following to the Camera2D class.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets the cameras transformation matrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Matrix TransformationMatrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If a change is detected, update matrices before</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  returning value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if(_hasChanged)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            UpdateMatrices();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return _transformationMatrix;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets the inverse of the camera&#x27;s transformation matrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Matrix InverseMatrix</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If a change is detected, update matrices before</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  returning value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_hasChanged)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            UpdateMatrices();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return _inverseMatrix;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Both of these just return their respective backing fields, however, before returning, they check if the <code>_hasChanged</code> boolean is true.  If it is, a call to update our matrices is performed first before returning the values. Next we&#x27;ll add a few additional properties that will allow the adjustment of the camera&#x27;s position, rotation, scale, and origin.  Add the following to the Camera2D class:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets or Sets the xy-coordinate position of the camera relative</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     to the world space of the game</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Vector2 Position</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get { return _position; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If the value hasn&#x27;t actually changed, just return back</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_position == value) { return; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Set the position value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _position = value;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Flag that a change has been made</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _hasChanged = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets or Sets the rotation angle of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public float Rotation</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get { return _rotation; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If the value hasn&#x27;t actually changed, just return back</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_rotation == value) { return; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Set the rotation value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _rotation = value;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Flag that a change has been made</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _hasChanged = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets or Sets the zoom level of the camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Vector2 Zoom</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get { return _zoom; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If the value hasn&#x27;t actually changed, just return back</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_zoom == value) { return; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Set the zoom value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _zoom = value;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Flag that a change has been made</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _hasChanged = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets or Sets the origin point of the camera relative to the</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     ViewPort</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Vector2 Origin</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get { return _origin; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If the value hasn&#x27;t actually changed, just return back</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_origin == value) { return; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Set the origin value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _origin = value;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Flag that a change has been made</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _hasChanged = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets or Sets the camera&#x27;s x-coordinate position relative to the world</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     space of the game</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public float X</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get { return _position.X; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If the value hasn&#x27;t actually changed, just return back</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_position.X == value) { return; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Set the position x value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _position.X = value;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Flag that a change has been made</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _hasChanged = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Gets or Sets the camera&#x27;s y-coordinate position relative to the world</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     space of the game</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public float Y</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    get { return _position.Y; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  If the value hasn&#x27;t actually changed, just return back</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if (_position.Y == value) { return; }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Set the position y value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _position.Y = value;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //  Flag that a change has been made</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        _hasChanged = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The getter for each of these properties return back their respective backing field values.  In each of the setters, first a check to see if the value has actually changed is performed.  If it is actually a new value, the value is set to the respective backing field, and the <code>_hasChanged</code> boolean is set to true, indicating that a change has been made.  The last two properties <code>X</code> and <code>Y</code> are mostly there for utility so we can set them individually instead of having to supply a full Vector2 each time to <code>Position</code>.  </p><p>That&#x27;s it for our properties.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="screen-space-to-camera-space-methods"></a>Screen Space to Camera Space Methods<a class="hash-link" href="#screen-space-to-camera-space-methods" title="Direct link to heading">#</a></h2><hr><p>By introducing a camera into our game, we&#x27;ve also created two separate coordinate spaces.  </p><table><thead><tr><th>System</th><th>Definition</th></tr></thead><tbody><tr><td><strong>World Space</strong></td><td>The World Space coordinate system defines the xy-coordinate location of the entities within our game&#x27;s world.</td></tr><tr><td><strong>Screen Space</strong></td><td>The screen space coordinate system defines the xy-coordinate location relative to the game&#x27;s window, with the top-left of the game window being xy-positiong {0, 0}.  This is the coordinate system things outside of our game, such as the players mouse, exist in.</td></tr></tbody></table><p>To further expand on this concept, take a look at the following image:</p><p><img alt="world space to screen space concept" src="/assets/images/world-to-screen-space-2ab94c951bce859adc4a5e123e5757b5.png"></p><p>On the left is our game world.  The game world is 2000px wide by 2000px tall.  In this game world, our player is located at world space xy-position {1000, 900}.  On the right is our game screen that is being rendered.  The game screen is only 1280px wide by 720px tall.  We have the mouse at screen space xy-position {1000, 650}.</p><p>We need something that is going to translate between these two coordinate systems. Thankfully, it&#x27;s actually not too difficult.  In our Camera2D class, add the following two methods</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Translate the given screen space xy-coordinate position</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     to the equivalent world space xy-coordinate position</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;param name=&quot;position&quot;&gt;The xy-coordinate position in screen space to translate&lt;/param&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;returns&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     The xy-coodinate position in world space</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/returns&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Vector2 ScreenToWorld(Vector2 position)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    return Vector2.Transform(position, InverseMatrix);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     Translates the given world space xy-coordinate position</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     to the equivalent screen space xy-coordinate position</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/summary&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;param name=&quot;position&quot;&gt;The xy-coordinate position in world space to translate&lt;/param&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;returns&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">///     The xy-coordinate position in screen space</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/// &lt;/returns&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Vector2 WorldToScreen(Vector2 position)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    return Vector2.Transform(position, TransformationMatrix);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>With these two methods, we can translate between the two coordinate systems.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-the-camera"></a>Using the Camera<a class="hash-link" href="#using-the-camera" title="Direct link to heading">#</a></h2><hr><p>To use our camera in our game, first we need to create a new instance of the camera.  in our Game1 class and the following field and initialize it within the constructor.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">//  Our camera</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Camera2D _camera;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">public Game1()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    graphics = new GraphicsDeviceManager(this);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    Content.RootDirectory = &quot;Content&quot;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  Create our camera with 1280 with and 720 height</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    _camera = new Camera2D(1280, 720);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p> If you would like to instead create the camera using the <code>GraphicsDevice.ViewPort</code> from within Game1, you can do this, but you&#x27;ll need to create the camera instead in the <code>Initialize()</code> method.  This is because you need the <code>GraphicsDevice</code> property to be set, which it will not be until Initialize is called.</p></div></div><p>Now, in our <code>Draw()</code> method, we need to pass the transformation matrix from the camera into the spritebatch when we call <code>sprtiebatch.Begin()</code> like so</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-csharp codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">spriteBatch.Begin(transformMatrix: _camera.TransformationMatrix);</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">//  Draw things here</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">spriteBatch.End();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>And that&#x27;s it.  You now have a 2D camera that you can use in you game projects.  Don&#x27;t stop here though, get creative. Think of some other things to add to your camera, like a way to smoothly move it from one position to another, or a way to &quot;shake&quot; it to give that sweet sweet screen shake effect. If you have some interesting things you added, let me know on <a href="http://www.twitter.com/manbeardgames" target="_blank" rel="noopener noreferrer">Twitter</a> and I&#x27;ll add them here (with your permission of course). </p><p>And be sure to check out the project files for this tutorial on <a href="https://github.com/manbeardgames/manbeardgames-site-tutorials/tree/master/tutorials/2d-camera" target="_blank" rel="noopener noreferrer">Github</a> for to see a completed example of using the camera and moving it around with the keyboard.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-12-22T04:14:11.000Z" class="docLastUpdatedAt_217_">12/21/2020</time> by <strong>Christopher Whitley</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-files" class="table-of-contents__link">Project Files</a></li><li><a href="#create-the-camera-class" class="table-of-contents__link">Create the Camera Class</a></li><li><a href="#updating-the-matrices" class="table-of-contents__link">Updating the Matrices</a></li><li><a href="#adding-camera-properties" class="table-of-contents__link">Adding Camera Properties</a></li><li><a href="#screen-space-to-camera-space-methods" class="table-of-contents__link">Screen Space to Camera Space Methods</a></li><li><a href="#using-the-camera" class="table-of-contents__link">Using the Camera</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 Christopher Whitley.<br> Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.a004a2b6.js"></script>
<script src="/runtime~main.34983ed2.js"></script>
<script src="/main.169cd321.js"></script>
<script src="/1.45bbbcce.js"></script>
<script src="/45.2cefdf73.js"></script>
<script src="/46.81528f9c.js"></script>
<script src="/f976f453.3f812314.js"></script>
<script src="/44.5d5b5f92.js"></script>
<script src="/532d9d9c.d5495cd0.js"></script>
</body>
</html>