
<!doctype html>
<html>

<head>
    


<!-- BEGIN: source/partials/_head.ejs -->
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Manbeardgames">

<!-- SEO Title -->
<meta name="title" content="ManBeardGames AABB 2D Collision Checks">
<!-- SEO Description -->
<meta name="description" contnet="">

<!-- Open Graph Type -->
<meta property="og:type" content="website">
<!-- Open Graph Title -->
<meta property="og:title" content="AABB 2D Collision Checks">
<!-- Opeh Graph Image -->
<meta property="og:image" content="https://manbeardgames.com/img/tutorials/aabb-2d-collision-checks/tutorial-cover.png">
<!-- Opeh Graph Site Name -->
<meta property="og:site_name" content="ManBeardGames">
<!-- Open Graph Description -->
<meta property="og:description" content="How to create a simple check for 2D collision using Axis-Aligned Bounding Box (AABB)">

<!-- Favicon -->
<link rel="shortcut icon" type="image/png" href="/favicon.png"/>


<title>AABB 2D Collision Checks</title>

<!-- Bootstrap 4.0 CSS -->
<link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.css">

<!-- Material Design Icons CSS -->
<link rel="stylesheet" href="/vendor/mdi/css/materialdesignicons.css">

<!-- Site CSS -->
<link rel="stylesheet" href="/css/site.css">

<!-- jQuery JS -->
<script type="text/javascript" src="/vendor/jquery/js/jquery.js"></script>

<!-- PrismJS Style Theme CSS -->
<link rel="stylesheet" href="/vendor/prismjs/css/prism-tomorrow.css">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-63802407-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-63802407-1');
</script>

<!-- END: source/partials/_head.ejs -->

</head>

<body>
    <div id="flex-wrap">
        <header>
            

<nav class="navbar navbar-expand-lg fixed-top" id="topNav">
    <!-- Navbar brand background image is supplied by the CSS style -->
    <a class="navbar-brand" href="/"></a>
    <!-- <button class="navbar-toggler mr-auto" type="button" data-toggle="collapse" data-target="#sidenav" aria-controls="sidenav"
        aria-expanded="false" aria-label="Toggle sidebar">
        <span class="navbar-toggler-icon"></span>
    </button>     -->
    <h3 class="text-white"></h3>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="/#games">Games</a></li>
            <li class="nav-item"><a class="nav-link" href="/tutorials">Tutorials</a></li>
            <li class="nav-item"><a class="nav-link" href="/dev-blog">Dev Blog</a></li>
        </ul>
    </div>
</nav>


        </header>
        <main>
            <div class="container post">


            <h1 id=overview>Overview</h1><hr>
<p>in this tutorial, we&#39;re going to discuss Axis-Aligned Bounding Box (AABB) collision detection between 2D objects in MonoGame.  Collision detection in game programming can be as complicated as you want it, or as simple as you need it.  There are frameworks out there that can assist in getting you up and going with collision detection such as the <a target="_blank" href="https://archive.codeplex.com/?p=farseerphysics">FarSeer Physics Engine</a> (which is now <a target="_blank" href="https://github.com/VelcroPhysics/VelcroPhysics">Velcro Physics</a> though that version is still under construction). There&#39;s also the <a target="_blank" href="https://github.com/craftworkgames/MonoGame.Extended">MonoGame.Extended Framework</a> and the <a target="_blank" href="https://github.com/prime31/Nez">Nez Framework</a>, both of which have collision systems. All of these are excellent tools that you can use.</p>
<p><strong>Axis-Aligned Bounding Box, or AABB, allows us to recognize a collision has occurred between two defined rectangular areas.  There are other methods of collision detection for circular collision and n-gon collision. Those will be covered in a future tutorial and will not be within the scope of this one.</strong></p>

            <h1 id=project-files>Project Files</h1><hr>
<p>If you would like to follow along with this tutorial using the same files and assets I use, you can find them <a target="_blank" href="https://github.com/manbeardgames/manbeardgames-site-tutorials/tree/master/tutorials/aabb-2d-collision-checks">here on github</a>.</p>

            <h2 id=defining-collision>Defining Collision</h2><hr>
<p>Before we can get started on the fun code stuff, we first need to talk about what collision is.  At its most basic definition, it is when defined areas within your game overlap.  </p>
<p>
            <div class="text-center">
            <img class="img-fluid border border-dark" src="\img/tutorials/aabb-2d-collision-checks/tutorial-cover.png" alt="null" />
            </div></p>
<p>In the image above there are two scenarios.  The scenario on the left shows two defined rectangular areas, red and green.  These defined areas do no overlap, so this does not define a collision.  In the scenario on the right, the defined red and green areas do overlap, so this would define a collision.</p>
<p>The method of detecting collision we&#39;ll be using, as stated previously, is called Axis-Aligned Bounding Box.  A <strong>Bounding Box</strong> is just a 2D rectangle whose position and area contain the object that is collidable.  <strong>Axis-Aligned</strong> means that our bounding boxes are aligned on the same coordinate system.   </p>
<p>So, now that we have defined what a collision means, how do we detect it?</p>

            <h2 id=detecting-a-collision>Detecting a Collision</h2><hr>
<p>For AABB collision detection to say that there was a collision between two bounding boxes, there is a simple checklist.  </p>
<ol>
<li>Is the x-coordinate position of the left edge of Bounding Box 1 less than the x-coordinate position of the right edge of Bounding Box 2?</li>
<li>Is the x-coordinate position of the right edge of Bounding Box 1 greater than the x-coordinate position of the left edge of Bounding Box 2?</li>
<li>Is the y-coordinate position of the top edge of Bounding Box 1 less than the y-coordinate position of the bottom edge of Bounding Box 2?</li>
<li>is the y-coordinate position of the bottom edge of Bounding Box 1 greater than the y-coordinate position of the top edge of Bounding Box 2?</li>
</ol>
<p>If you can answer yes to all four of these questions, then a collision is detected.  If any of those answers is no, even if it&#39;s just one of them, then no collision is detected.  Look at the following images to further illustrate this.</p>
<p>
            <div class="text-center">
            <img class="img-fluid border border-dark" src="\img/tutorials/aabb-2d-collision-checks/collision-fail-1.png" alt="null" />
            </div></p>
<p>
            <div class="text-center">
            <img class="img-fluid border border-dark" src="\img/tutorials/aabb-2d-collision-checks/collision-fail-2.png" alt="null" />
            </div></p>
<p>
            <div class="text-center">
            <img class="img-fluid border border-dark" src="\img/tutorials/aabb-2d-collision-checks/collision-success.png" alt="null" />
            </div></p>
<p>Since all four of the questions we must ask are just yes/no questions, we can easily translate this into an if statement in our code to perform the check. The following is an example of this</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">CheckCollision</span><span class="token punctuation">(</span><span class="token class-name">BoundingBox</span> bb1<span class="token punctuation">,</span> <span class="token class-name">BoundingBox</span> bb2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>bb1<span class="token punctuation">.</span>Left <span class="token operator">&lt;</span> bb2<span class="token punctuation">.</span>Right <span class="token operator">&amp;&amp;</span> bb1<span class="token punctuation">.</span>Right <span class="token operator">></span> bb2<span class="token punctuation">.</span>Left <span class="token operator">&amp;&amp;</span> bb1<span class="token punctuation">.</span>Top <span class="token operator">&lt;</span> bb2<span class="token punctuation">.</span>Bottom <span class="token operator">&amp;&amp;</span> bb1<span class="token punctuation">.</span>Bottom <span class="token operator">></span> bb2<span class="token punctuation">.</span>Top<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>And that&#39;s it. Super simple.   Now let&#39;s apply this to a MonoGame project. If you need to, go ahead and create a new MonoGame Cross Platform Desktop project.</p>

            <h2 id=the-bounding-box-class>The Bounding Box Class</h2><hr>
<p>The first thing we&#39;re going to make is the <code>BoundingBox</code> class.  Create the new class and add the following properties and constructor</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Gets or Sets the xy-coordinate top-left position</span>
<span class="token comment">///     of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token class-name">Vector2</span> Position
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _position<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token punctuation">{</span> _position <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token class-name">Vector2</span> _position<span class="token punctuation">;</span>

<span class="token comment">/// &lt;summary></span>
<span class="token comment">///     The width of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token keyword">float</span> Width <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">/// &lt;summary></span>
<span class="token comment">///     The height of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token keyword">float</span> Height <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>


<span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Creates a new bounding box instance</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token comment">/// &lt;param name="position">The position of the bounding box&lt;/param></span>
<span class="token comment">/// &lt;param name="width">The width of the bounding box&lt;/param></span>
<span class="token comment">/// &lt;param name="height">The height of the bounding box&lt;/param></span>
<span class="token keyword">public</span> <span class="token function">BoundingBox</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">,</span> <span class="token keyword">float</span> width<span class="token punctuation">,</span> <span class="token keyword">float</span> height<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//  Set the properties</span>
    _position <span class="token operator">=</span> position<span class="token punctuation">;</span>
    Width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    Height <span class="token operator">=</span> height<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>The following table further explains the properties setup  </p>

            <table class="table"><thead class="thead-dark"><tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td><code>Position</code></td>
<td>Vector2</td>
<td>This is the xy-coordinate location of the top-left of the bounding box.  Whenever the object moves that the bounding box is containing, you&#39;ll need to be sure to update this value</td>
</tr>
<tr>
<td><code>Width</code></td>
<td>float</td>
<td>This is the width of our bounding box.</td>
</tr>
<tr>
<td><code>Height</code></td>
<td>float</td>
<td>This is the height of our bounding box</td>
</tr>
</tbody></table><p>The constructor takes in a <code>Vector2 position</code>, <code>float width</code>, and <code>float height</code> values. These three values must be set at minimum for our bounding box to exist. </p>
<p>Now that we have these three basic properties of our bounding box, lets add a couple of utility properties.  When we want to reference the x-coordinate for the right edge of the bounding box, we don’t want to have to say <code>_position.X + Width</code> every time.  Instead we&#39;ll just define the properties  that do it for us.  Add the following properties to the BoundingBox class</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Gets or Sets the y-coordinate position of the top</span>
<span class="token comment">///     edge of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token keyword">float</span> Top
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _position<span class="token punctuation">.</span>Y<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token punctuation">{</span> _position<span class="token punctuation">.</span>Y <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Gets or Sets the y-coordinate position of the bottom</span>
<span class="token comment">///     edge of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token keyword">float</span> Bottom
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _position<span class="token punctuation">.</span>Y <span class="token operator">+</span> Height<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token punctuation">{</span> _position<span class="token punctuation">.</span>Y <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">-</span> Height<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Gets or Sets the x-coordinate position of the left</span>
<span class="token comment">///     edge of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token keyword">float</span> Left
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _position<span class="token punctuation">.</span>X<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token punctuation">{</span> _position<span class="token punctuation">.</span>X <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Gets or Sets the x-coordinate position of the right</span>
<span class="token comment">///     edge of the bounding box</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token keyword">float</span> Right
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _position<span class="token punctuation">.</span>X <span class="token operator">+</span> Width<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token punctuation">{</span> _position<span class="token punctuation">.</span>X <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">-</span> Width<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Now when we need to reference an edge of the bounding box, we can simply just call <code>Top</code>, <code>Bottom</code>, <code>Left</code>, or <code>Right</code>.  Next, we&#39;ll need to create the method that performs the actual AABB collision check.  Add the following method to the BoundingBox class</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Performs Axis-Aligned Bounding Box collision check against another</span>
<span class="token comment">///     BoundingBox</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token comment">/// &lt;param name="other">The other BoundingBox to check if this and that one is colliding&lt;/param></span>
<span class="token comment">/// &lt;returns></span>
<span class="token comment">///     True if they are colliding; otherwise false.</span>
<span class="token comment">/// &lt;/returns></span>
<span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">CollisionCheck</span><span class="token punctuation">(</span><span class="token class-name">BoundingBox</span> other<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 1. Is the left edge of this BoundingBox less than the right edge of the other BoundingBox</span>
    <span class="token comment">// 2. Is the right edge of this BoundingBox greater than the left edge of the other BoundingBox</span>
    <span class="token comment">// 3. Is the top edge of this BoundingBox less than the bottom edge of the other BoundingBox</span>
    <span class="token comment">// 4. Is the bottom edge of this BoundingBox greater than the top edge of the other BoundingBox</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Left <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>Right <span class="token operator">&amp;&amp;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Right <span class="token operator">></span> other<span class="token punctuation">.</span>Left <span class="token operator">&amp;&amp;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Top <span class="token operator">&lt;</span> other<span class="token punctuation">.</span>Bottom <span class="token operator">&amp;&amp;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Bottom <span class="token operator">></span> other<span class="token punctuation">.</span>Top<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Anytime we want to check if two <code>BoundingBox</code> objects are colliding, we just call <code>CollisionCheck</code> from one of them and supply it with the other one.  Before we put this to use though, lets add one last property to our <code>BoundingBox</code> class for utility.  This property will return a <code>Rectangle</code> that we can use later in a spritebatch to render the bounding box and see it. Add the following to the <code>BoundingBox</code> class.</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">///     Gets a Rectangle representation of this BoundingBox</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">public</span> <span class="token class-name">Rectangle</span> Bounds
<span class="token punctuation">{</span>
    <span class="token keyword">get</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Left<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Top<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Width<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
            <h2 id=using-the-boundingbox-class>Using the BoundingBox Class</h2><hr>
<p>Now that we have all the pieces in place, let&#39;s put it to work so we can see it in action.  In <code>Game1</code>, we&#39;re going to add two new fields <code>_boundingBox</code> and <code>_otherBoundingBox</code>.  We&#39;ll see the initial position of <code>_boundingBox</code> to be on the left side of the screen, and <code>_otherBoundingBox</code> to be in the center of the screen.  Next, in our <code>Update</code> method, we&#39;ll add logic, so we can move <code>_boundingBox</code> around the screen.  And finally, in our <code>Draw</code> method, we&#39;ll render both bounding boxes. We&#39;ll add logic so that a collision check is made, if a collision is detected, they will both render red, otherwise they&#39;ll render green.</p>
<p>To start, add the following fields to <code>Game1</code> and initialize them within the constructor</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">//  This is the bounding box that we'll move around</span>
<span class="token keyword">private</span> <span class="token class-name">BoundingBox</span> _boundingBox<span class="token punctuation">;</span>

<span class="token comment">//  This is the bounding box that will be stationary in</span>
<span class="token comment">//  the center of the screen</span>
<span class="token keyword">private</span> <span class="token class-name">BoundingBox</span> _otherBoundingBox<span class="token punctuation">;</span>

<span class="token comment">//  The width of our screen</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> _screenWidth <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">;</span>

<span class="token comment">//  The height of our screen</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> _screenHeight <span class="token operator">=</span> <span class="token number">720</span><span class="token punctuation">;</span>

<span class="token comment">//  This is a 1x1 texture that we'll use as the </span>
<span class="token comment">//  texture when we render our bounding boxes</span>
<span class="token keyword">private</span> <span class="token class-name">Texture2D</span> _pixel<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token function">Game1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    graphics <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GraphicsDeviceManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Content<span class="token punctuation">.</span>RootDirectory <span class="token operator">=</span> <span class="token string">"Content"</span><span class="token punctuation">;</span>

    <span class="token comment">//  Create the first bounding box at the right edge of the screen. By multiplying</span>
    <span class="token comment">//  the position by 0.5f, we put it at center height</span>
    _boundingBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoundingBox</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _screenHeight<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//  Create the second boundinb box at the center of the screen.</span>
    _otherBoundingBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoundingBox</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span>_screenWidth<span class="token punctuation">,</span> _screenHeight<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//  The following is just to actually set the screen width and height</span>
    graphics<span class="token punctuation">.</span>PreferredBackBufferWidth <span class="token operator">=</span> _screenWidth<span class="token punctuation">;</span>
    graphics<span class="token punctuation">.</span>PreferredBackBufferHeight <span class="token operator">=</span> _screenHeight<span class="token punctuation">;</span>
    graphics<span class="token punctuation">.</span><span class="token function">ApplyChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><div class="card text-white bg-dark mt-3 mb-3">
    <div class="card-header">
        <span class="lead">Note</span>
    </div>
    <div class="card-body">
        <p>
            In the code above, in the constructor, I set the <code>graphics.PreferredBackBufferWidth</code> and <code>graphics.PreferredBackBufferHeight</code> properties, then called <code>graphics.ApplyChanges()</code>.  This allows me to set the width and height of the game screen at the start to the desired 1280 x 720 for this example. This isn't part of the tutorial, just wanted to explain it in case you were wondering why I added coded if you didn't know what it did.
        </p>
    </div>
</div>

<p>Now that we have our two <code>BoundingBox</code> fields, let add code in the <code>Update</code> method that will allow us to move the first one around the screen.  We&#39;ll perform keyboard input detection for the arrow keys and adjust the position of <code>_boundingBox</code> accordingly.  After adjusting the position, we&#39;ll also perform a check using our utility properties we created to ensure that it can&#39;t leave the confines of the screen. Add the following to the <code>Update</code> method.</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">/// Allows the game to run logic such as updating the world,</span>
<span class="token comment">/// checking for collisions, gathering input, and playing audio.</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token comment">/// &lt;param name="gameTime">Provides a snapshot of timing values.&lt;/param></span>
<span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token class-name">GameTime</span> gameTime<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>GamePad<span class="token punctuation">.</span><span class="token function">GetState</span><span class="token punctuation">(</span>PlayerIndex<span class="token punctuation">.</span>One<span class="token punctuation">)</span><span class="token punctuation">.</span>Buttons<span class="token punctuation">.</span>Back <span class="token operator">==</span> ButtonState<span class="token punctuation">.</span>Pressed <span class="token operator">||</span> Keyboard<span class="token punctuation">.</span><span class="token function">GetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsKeyDown</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>Escape<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">Exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//  Get the delta time between current and previous update frame</span>
    <span class="token keyword">float</span> deltaTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>gameTime<span class="token punctuation">.</span>ElapsedGameTime<span class="token punctuation">.</span>TotalSeconds<span class="token punctuation">;</span>

    <span class="token comment">//  The speed rate at which we'll move _boundingBox</span>
    <span class="token keyword">float</span> speed <span class="token operator">=</span> <span class="token number">200.0f</span><span class="token punctuation">;</span>

    <span class="token comment">//  Get the state of the keyboard</span>
    <span class="token keyword">var</span> keyboardState <span class="token operator">=</span> Keyboard<span class="token punctuation">.</span><span class="token function">GetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//  Check for input on the arrow keys and move the _boundingBox accordingly</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>keyboardState<span class="token punctuation">.</span><span class="token function">IsKeyDown</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>Up<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _boundingBox<span class="token punctuation">.</span>Position <span class="token operator">-</span><span class="token operator">=</span> Vector2<span class="token punctuation">.</span>UnitY <span class="token operator">*</span> speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>keyboardState<span class="token punctuation">.</span><span class="token function">IsKeyDown</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>Down<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _boundingBox<span class="token punctuation">.</span>Position <span class="token operator">+</span><span class="token operator">=</span> Vector2<span class="token punctuation">.</span>UnitY <span class="token operator">*</span> speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyboardState<span class="token punctuation">.</span><span class="token function">IsKeyDown</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>Left<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _boundingBox<span class="token punctuation">.</span>Position <span class="token operator">-</span><span class="token operator">=</span> Vector2<span class="token punctuation">.</span>UnitX <span class="token operator">*</span> speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>keyboardState<span class="token punctuation">.</span><span class="token function">IsKeyDown</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>Right<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _boundingBox<span class="token punctuation">.</span>Position <span class="token operator">+</span><span class="token operator">=</span> Vector2<span class="token punctuation">.</span>UnitX <span class="token operator">*</span> speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//  This is to prevent the _boundingBox from leaving the edges of the screen</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_boundingBox<span class="token punctuation">.</span>Left <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> _boundingBox<span class="token punctuation">.</span>Left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_boundingBox<span class="token punctuation">.</span>Right <span class="token operator">>=</span> _screenWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span> _boundingBox<span class="token punctuation">.</span>Right <span class="token operator">=</span> _screenWidth<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>_boundingBox<span class="token punctuation">.</span>Top <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> _boundingBox<span class="token punctuation">.</span>Top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_boundingBox<span class="token punctuation">.</span>Bottom <span class="token operator">>=</span> _screenHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span> _boundingBox<span class="token punctuation">.</span>Bottom <span class="token operator">=</span> _screenHeight<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>gameTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Before we can draw the bounding boxes to the screen, we will need a <code>Texture2D</code>.  We already have the <code>_pixel</code> Texture2D field that we above, so we just need to initialize it in the <code>LoadContent</code> method.  We&#39;ll create it as a 1x1 texture with the color being white.  Add the following to the <code>LoadContent</code> method</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">/// LoadContent will be called once per game and is the place to load</span>
<span class="token comment">/// all of your content.</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">LoadContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Create a new SpriteBatch, which can be used to draw textures.</span>
    spriteBatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpriteBatch</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//  Create a new 1x1 Texture2D</span>
    _pixel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Texture2D</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//  Set the color data for the Texture2D as White</span>
    _pixel<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SetData</span><span class="token punctuation">&lt;</span><span class="token class-name">Color</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> Color<span class="token punctuation">.</span>White <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre><p>For the last piece, we need to update the <code>Draw</code> method.  Here, we&#39;ll call the <code>CheckCollision</code> method from <code>_boundingBox</code> and pass in <code>_otherBoundingBox</code>.  If a collision is detected, we&#39;ll render both boxes in the color red.  If no collision is detected, then we&#39;ll render them in green.  We&#39;ll also make use of the <code>Bounds</code> utility property we created for our <code>BoundingBox</code> class to get a rectangle that we can use to with spritebatch to render our bounding boxes. </p>
<p>Add the following to the <code>Draw</code> method</p>

            <pre class="language-csharp"><code class = "language-csharp"><span class="token comment">/// &lt;summary></span>
<span class="token comment">/// This is called when the game should draw itself.</span>
<span class="token comment">/// &lt;/summary></span>
<span class="token comment">/// &lt;param name="gameTime">Provides a snapshot of timing values.&lt;/param></span>
<span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token class-name">GameTime</span> gameTime<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//  Changed this to Black.</span>
    GraphicsDevice<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Black<span class="token punctuation">)</span><span class="token punctuation">;</span>

    spriteBatch<span class="token punctuation">.</span><span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//  Check if there is a collision. If so, render the BoundingBoxes as red.</span>
    <span class="token comment">//  Otherwise render them as green</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>_boundingBox<span class="token punctuation">.</span><span class="token function">CollisionCheck</span><span class="token punctuation">(</span>_otherBoundingBox<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        spriteBatch<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span>_pixel<span class="token punctuation">,</span> _boundingBox<span class="token punctuation">.</span>Bounds<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span><span class="token punctuation">;</span>
        spriteBatch<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span>_pixel<span class="token punctuation">,</span> _otherBoundingBox<span class="token punctuation">.</span>Bounds<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        spriteBatch<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span>_pixel<span class="token punctuation">,</span> _boundingBox<span class="token punctuation">.</span>Bounds<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">)</span><span class="token punctuation">;</span>
        spriteBatch<span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span>_pixel<span class="token punctuation">,</span> _otherBoundingBox<span class="token punctuation">.</span>Bounds<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    spriteBatch<span class="token punctuation">.</span><span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span>gameTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>If you run the game now, you&#39;ll see our two bounding boxes on the screen.  You can move the one on the left using the Up, Down, Left, Right arrow keys on your keyboard.  If they are not colliding with each other, they will both remain green.  When they collide, they will change to red.</p>

            <h2 id=beyond-this-tutorial>Beyond this Tutorial</h2><p>That is really it for the scope of this tutorial for now.  We&#39;ve created a simple method of performing Axis-Aligned Bounding Box collision detection.  I feel now however you may have question.  Question such as &quot;How do I use this to prevent objects from overlapping when a collision is detected?&quot;.  The answer to that question is a different part of collision systems called <strong>Collision Resolution</strong>.  While I did not discuss it here, you have the tools now to add this piece yourself.  You could, for instance, perform the collision check after calculating the new position of the object. If the check is true, then don&#39;t allow the object to move there. Or allow it to move just closest point before colliding.  Or maybe your question is &quot;How would I bounce an object off another after colliding?&quot;, in which case that would require a whole other tutorial.  However, as I said, you know have the basic element in place to get all that going, the actual detection of the collision.</p>
<p>Another thing we did not discuss here is how to detect the collision of a circular bounding box versus a rectangular bounding box, or circle vs circle.  We also didn&#39;t discuss collision detection using n-gons, objects like triangles, or diamonds, etc.  These are things we&#39;ll discuss in a future tutorial, so keep a look out for that.  </p>
<p>Be sure to download the project files mentioned at the beginning to see the completed example of this tutorial.  </p>
<p>As always, I hope this was helpful for you. If you have any questions or feedback on this tutorial, please let me know on <a target="_blank" href="http://www.twitter.com/manbeardgames">Twitter</a>.  </p>
</div>
        </main>

        <footer>
            

            <span class="footer-brand">ManBeardGames <span>&copy; 2019</span></span>
                    </footer>

        

<!-- Bootstrap JS -->
<script type="text/javascript" src="/vendor/bootstrap/js/bootstrap.js"></script>

<!-- Popper JS -->
<script type="text/javascript" src="/vendor/popper.js/js/popper.js"></script>

<!-- Site JS -->
<script type="text/javascript" src="/js/site.js"></script>

<script>hljs.initHighlightingOnLoad();</script>
    </div>
</body>

</html>