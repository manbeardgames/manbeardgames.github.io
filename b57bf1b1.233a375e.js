(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=r.a.createContext({}),l=function(e){var t=r.a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.a.createElement(d.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(n),h=a,m=p["".concat(c,".").concat(h)]||p[h]||b[h]||i;return n?r.a.createElement(m,o(o({ref:t},d),{},{components:n})):r.a.createElement(m,o({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var d=2;d<i;d++)c[d]=n[d];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},93:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return l}));var a=n(3),r=n(7),i=(n(0),n(111)),c={id:"updating-scene-class",title:"Scene Transitions: Updating The Scene Class",hide_title:!0,hide_table_of_contents:!1,sidebar_label:"Updating the Scene Class",custom_edit_url:null,keywords:["monogame tutorial","monogame framework","monogame","tutorial","scene transition","scene","scenes"],description:"A tutorial on creating scene transition effects in a MonoGame project.",image:"/img/mgb_cookie.svg",slug:"/tutorials/monogame-3-8/scene-transitions/updating-scene-class"},o={unversionedId:"tutorials/monogame-3-8/scene-transitions/updating-scene-class",id:"tutorials/monogame-3-8/scene-transitions/updating-scene-class",isDocsHomePage:!1,title:"Scene Transitions: Updating The Scene Class",description:"A tutorial on creating scene transition effects in a MonoGame project.",source:"@site/docs\\tutorials\\monogame-3-8\\scene-transitions\\03-updating-scene-class.md",slug:"/tutorials/monogame-3-8/scene-transitions/updating-scene-class",permalink:"/docs/tutorials/monogame-3-8/scene-transitions/updating-scene-class",editUrl:null,version:"current",lastUpdatedBy:"Christopher Whitley",lastUpdatedAt:1608636223,sidebar_label:"Updating the Scene Class",sidebar:"tutorials",previous:{title:"Scene Transitions: RenderTarget2D Overview",permalink:"/docs/tutorials/monogame-3-8/scene-transitions/rendertarget-overview"},next:{title:"Scene Transitions: The Transition Class",permalink:"/docs/tutorials/monogame-3-8/scene-transitions/transition-class"}},s=[{value:"RenderTarget Property",id:"rendertarget-property",children:[]},{value:"GenerateRenderTarget()",id:"generaterendertarget",children:[]},{value:"HandleGraphicsReset() and HandleGraphicsCreated()",id:"handlegraphicsreset-and-handlegraphicscreated",children:[]},{value:"Using the RenderTarget",id:"using-the-rendertarget",children:[]},{value:"Disposing the RenderTarget",id:"disposing-the-rendertarget",children:[]}],d={rightToc:s};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"updating-the-scene-class"},"Updating the Scene Class"),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This tutorial builds off of the code that was created in the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"../scenes/introduction"}),"previous tutorial on creating scenes"),".  If you haven't completed that tutorial yet, it is advised that you go through it before continuing past this point."))),Object(i.b)("p",null,"The first thing we're going to do is update our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class.  Each scene will need to have it's own ",Object(i.b)("inlineCode",{parentName:"p"},"RenderTarget2D")," instance that it draws to.  Open the ",Object(i.b)("strong",{parentName:"p"},"Scene.cs")," class file and let's get started."),Object(i.b)("h3",{id:"rendertarget-property"},"RenderTarget Property"),Object(i.b)("p",null,"Each scene will need to have its own ",Object(i.b)("inlineCode",{parentName:"p"},"RenderTarget2D")," instance that it draws to.  We can create a property for this to hold the instance."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the following.")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Open the ",Object(i.b)("strong",{parentName:"p"},"Scene.cs")," class file and add the following property."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Gets the RenderTarget this Scene draws to.\n/// </summary>\npublic RenderTarget2D RenderTarget { get; protected set; }\n")))),Object(i.b)("p",null,"This makes it so the render target is publicly accessible for any object that has a reference to our Scene instance, but only Scene types can set the value."),Object(i.b)("h3",{id:"generaterendertarget"},"GenerateRenderTarget()"),Object(i.b)("p",null,"We need to add a new method to our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class that we can use to create the ",Object(i.b)("inlineCode",{parentName:"p"},"RenderTarget2D")," instance.  We could just do this in the constructor of our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class, but remember, we may need to recreate the render target if the graphics device resets.  So we'll do it in a new method we can call when needed."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the Following")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Add the following method to the ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Generates a RenderTarget2D instance for our Scene.\n/// </summary>\npublic virtual void GenerateRenderTarget()\n{\n    int width = _game.GraphicsDevice.PresentationParameters.BackBufferWidth;\n    int height = _game.GraphicsDevice.PresentationParameters.BackBufferHeight;\n\n    //  If the RenderTarget instance has already been created previously but has yet\n    //  to be disposed of properly, dispose of the instance before setting a new one.\n    if (RenderTarget != null && !RenderTarget.IsDisposed)\n    {\n        RenderTarget.Dispose();\n    }\n\n    RenderTarget = new RenderTarget2D(_game.GraphicsDevice, width, height);\n}\n")))),Object(i.b)("p",null,"This method will check to see if there is already a render target and, if so , will dispose of it before creating a new one. Now that we have this method, we can update the constructor so that it generates the render target when a scene is created.  "),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the Following")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Find the constructor of our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class and update it to the following."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Creates a new Scene instance.\n/// </summary>\n/// <param name="game">\n///     A reference to our Game1 instance.\n/// </param>\n/// <exception cref="ArgumentNullException">\n///     Thrown if the value supplied for <paramref name="game"/> \n///     is null\n/// </exception>\npublic Scene(Game1 game)\n{\n    if (game == null)\n    {\n        throw new ArgumentNullException(nameof(game), "Game cannot be null!");\n    }\n\n    _game = game;\n    \n    //  Generate the render target\n    GenerateRenderTarget();\n}\n')))),Object(i.b)("h3",{id:"handlegraphicsreset-and-handlegraphicscreated"},"HandleGraphicsReset() and HandleGraphicsCreated()"),Object(i.b)("p",null,"As was pointed out previously, whenever the graphics device is created or reset, we have to regenerate our render target instance.  So we need a couple of methods within the scene class that can be called in this events.  "),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the Following")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Add the following two methods to the ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class."),Object(i.b)("p",{parentName:"div"},Object(i.b)("strong",{parentName:"p"},"HandleGraphicsCreated()")),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Handles creating the contents of VRAM for the scene when the GraphicsDevice\n///     is created.\n/// </summary>\npublic virtual void HandleGraphicsCreated()\n{\n    GenerateRenderTarget();\n}\n")),Object(i.b)("p",{parentName:"div"},Object(i.b)("strong",{parentName:"p"},"HandleGraphicsReset()")),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"})," /// <summary>\n///     Handles recreating contents of VRAM for the scene when the GraphicsDevice\n///     is reset.\n/// </summary>\npublic virtual void HandleGraphicsReset()\n{\n    GenerateRenderTarget();\n}\n")))),Object(i.b)("p",null,"These two methods, when called, will simply just call the ",Object(i.b)("inlineCode",{parentName:"p"},"GenerateRenderTarget()")," method to recreate the render target instance."),Object(i.b)("h3",{id:"using-the-rendertarget"},"Using the RenderTarget"),Object(i.b)("p",null,"Now that we have a render target for the scene that we can draw too, we need to tell the scene to actually draw to it instead of to the game window directly. We can do this by telling the ",Object(i.b)("inlineCode",{parentName:"p"},"GraphicsDevice")," to use the render target.  "),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the Following")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Locate the ",Object(i.b)("inlineCode",{parentName:"p"},"BeforeDraw(SpriteBatch)")," method of our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class and change it to the following."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Handles preparing the Scene to draw.\n/// </summary>\n/// <remarks>\n///     This is called just before the main Draw method.\n/// </remarks>\n/// <param name="spriteBatch"></param>\npublic virtual void BeforeDraw(SpriteBatch spriteBatch, Color clearColor)\n{\n    //  Tell the graphics device to use this scene\'s render target.\n    _game.GraphicsDevice.SetRenderTarget(RenderTarget);\n\n    //  Clear the backbuffer\n    _game.GraphicsDevice.Clear(clearColor);\n\n    //  Begin the spritebatch\n    spriteBatch.Begin();\n}\n')))),Object(i.b)("p",null,"Here, the change we made is the first line inside the method.  We simply tell the ",Object(i.b)("inlineCode",{parentName:"p"},"GraphicsDevice")," to use the scene's render target.  "),Object(i.b)("p",null,"This however is only half the story.  If we tell the ",Object(i.b)("inlineCode",{parentName:"p"},"GraphicsDevice")," to use the render target, then it will keep using it, even in other draw code outside of our scene. We need to make sure that when we are finished drawing our scene, that we tell the ",Object(i.b)("inlineCode",{parentName:"p"},"GraphicsDevice")," to switch back to drawing to the backbuffer. "),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the Following")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Locate the ",Object(i.b)("inlineCode",{parentName:"p"},"AfterDraw(SpriteBatch)")," method, and change it to the following."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Handles ending any drawing the scene is performing.\n/// </summary>\n/// <remarks>\n///     This is called immediately after Draw.\n/// </remarks>\n/// <param name="spriteBatch">\n///     The SpriteBatch instance used for rendering.\n/// </param>\npublic virtual void AfterDraw(SpriteBatch spriteBatch)\n{\n    //  End the spritebatch\n    spriteBatch.End();\n\n    //  Tell the graphics device to stop using the render target\n    _game.GraphicsDevice.SetRenderTarget(null);\n}\n')))),Object(i.b)("p",null,"The change we made here is at the end of method. We just set the render target that the ",Object(i.b)("inlineCode",{parentName:"p"},"GraphicsDevice")," is using to ",Object(i.b)("inlineCode",{parentName:"p"},"null"),".  This tells it to go back to drawing to the game window."),Object(i.b)("h3",{id:"disposing-the-rendertarget"},"Disposing the RenderTarget"),Object(i.b)("p",null,"The last change we need to make to our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class is ensuring that we dispose of the ",Object(i.b)("inlineCode",{parentName:"p"},"RenderTarget2D")," instance when the scene is no longer being used.  If you recall from the previous tutorial, we setup the ",Object(i.b)("inlineCode",{parentName:"p"},"UnloadContent()")," method to handle freeing resources managed by the Scene's ",Object(i.b)("inlineCode",{parentName:"p"},"ContentManger()"),".  This will be a great place to also dispose of the render target, since it self is content of the scene that needs to be unloaded."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"Perform the Following")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Find the ",Object(i.b)("inlineCode",{parentName:"p"},"UpdateContent()")," method and change it to the following."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Unloads any content that has been loaded by the scene.\n/// </summary>\n/// <remarks>\n///     This will be called after the game switches to a new\n///     scene.\n/// </remarks>\npublic virtual void UnloadContent()\n{\n    _content.Unload();\n    _content = null;\n\n    //  Dispose of the render target if it is not already disposed.\n    if(RenderTarget != null && !RenderTarget.IsDisposed)\n    {\n        RenderTarget.Dispose();\n        RenderTarget = null;\n    }\n}\n")))),Object(i.b)("p",null,"Here the change we make is to check if the render target has been disposed, and if not, we dispose of it. "),Object(i.b)("p",null,"That's it for all the updates to our ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class.  Next, we're going to create the base class for the transition effects."))}l.isMDXComponent=!0}}]);