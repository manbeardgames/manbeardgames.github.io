(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{109:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return b}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),m=function(e){var n=r.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=m(e.components);return r.a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},h=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=m(t),h=a,b=p["".concat(c,".").concat(h)]||p[h]||d[h]||i;return t?r.a.createElement(b,o(o({ref:n},l),{},{components:t})):r.a.createElement(b,o({ref:n},l))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,c=new Array(i);c[0]=h;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var l=2;l<i;l++)c[l]=t[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},83:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return o})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return m}));var a=t(3),r=t(7),i=(t(0),t(109)),c={id:"tutorials-scenes-scene-class",title:"The Scene Class",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"The Scene Class",custom_edit_url:null,keywords:["monogame tutorial","monogame framework","monogame","tutorial","scene transition","scene","scenes"],description:"A tutorial on create scene transition effects in a MonoGame project.",image:null,slug:"/tutorials/scenes/the-scene-class"},o={unversionedId:"tutorials/scenes/tutorials-scenes-scene-class",id:"tutorials/scenes/tutorials-scenes-scene-class",isDocsHomePage:!1,title:"The Scene Class",description:"A tutorial on create scene transition effects in a MonoGame project.",source:"@site/docs\\tutorials\\scenes\\scene-class.md",slug:"/tutorials/scenes/the-scene-class",permalink:"/docs/tutorials/scenes/the-scene-class",editUrl:null,version:"current",sidebar_label:"The Scene Class",sidebar:"tutorials",previous:{title:"What is a Scene",permalink:"/docs/tutorials/scenes/what-is-a-scene"},next:{title:"Updating Game1",permalink:"/docs/tutorials/scenes/updating-game1"}},s=[{value:"The Code",id:"the-code",children:[]},{value:"Fields",id:"fields",children:[]},{value:"Constructor",id:"constructor",children:[]},{value:"Initialize()",id:"initialize",children:[]},{value:"LoadContent()",id:"loadcontent",children:[]},{value:"UnloadContent()",id:"unloadcontent",children:[]},{value:"Update(GameTime)",id:"updategametime",children:[]},{value:"BeforeDraw(SpritBatch, Color)",id:"beforedrawspritbatch-color",children:[]},{value:"Draw(SpriteBatch)",id:"drawspritebatch",children:[]},{value:"AfterDraw(SpritBatch)",id:"afterdrawspritbatch",children:[]}],l={rightToc:s};function m(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Before we dive into discussing what each section of the Scene class is for, I'm going to post the full class here. First, create a new class file in the project called ",Object(i.b)("strong",{parentName:"p"},"Scene.cs"),". Then add the following code to it."),Object(i.b)("h3",{id:"the-code"},"The Code"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"using statements")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"using Microsoft.Xna.Framework;\nusing Microsoft.Xna.Framework.Content;\nusing Microsoft.Xna.Framework.Graphics;\nusing System;\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Scene Class")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'public abstract class Scene\n{\n    //  A cached reference to our Game instance.\n    protected Game1 _game;\n\n    //  Used to load scene specific content\n    protected ContentManager _content;\n\n    /// <summary>\n    ///     Creates a new Scene instance.\n    /// </summary>\n    /// <param name="game">\n    ///     A reference to our Game1 instance.\n    /// </param>\n    /// <exception cref="ArgumentNullException">\n    ///     Thrown if the value supplied for <paramref name="game"/> \n    ///     is null\n    /// </exception>\n    public Scene(Game1 game)\n    {\n        if (game == null)\n        {\n            throw new ArgumentNullException(nameof(game), "Game cannot be null!");\n        }\n\n        _game = game;\n    }\n\n    /// <summary>\n    ///     Initializes the Scene\n    /// </summary>\n    /// <remarks>\n    ///     This is called only once, immediately after the scene becomes\n    ///     the active scene, and before the first Update is called on \n    ///     the scene\n    /// </remarks>\n    public virtual void Initialize()\n    {\n        _content = new ContentManager(_game.Services);\n        _content.RootDirectory = _game.Content.RootDirectory;\n        LoadContent();\n    }\n\n    /// <summary>\n    ///     Loads the content specific to the Scene.\n    /// </summary>\n    /// <remarks>\n    ///     This is called internally by the Initialize() method.\n    /// </remarks>\n    public virtual void LoadContent() { }\n\n    /// <summary>\n    ///     Unloads any content that has been loaded by the scene.\n    /// </summary>\n    /// <remarks>\n    ///     This will be called after the game switches to a new\n    ///     scene.\n    /// </remarks>\n    public virtual void UnloadContent() \n    {\n        _content.Unload();\n        _content = null;\n    }\n\n    /// <summary>\n    ///     Updates the Scene.\n    /// </summary>\n    /// <param name="gameTime">\n    ///     A snapshot of the frame specific timing values.\n    /// </param>\n    public virtual void Update(GameTime gameTime) { }\n\n\n    /// <summary>\n    ///     Handles preparing the Scene to draw.\n    /// </summary>\n    /// <remarks>\n    ///     This is called just before the main Draw method.\n    /// </remarks>\n    /// <param name="spriteBatch"></param>\n    public virtual void BeforeDraw(SpriteBatch spriteBatch, Color clearColor)\n    {\n        //  Clear the backbuffer\n        _game.GraphicsDevice.Clear(clearColor);\n\n        //  Begin the spritebatch\n        spriteBatch.Begin();\n    }\n\n    /// <summary>\n    ///     Draws the Scene to the screen.\n    /// </summary>\n    /// <remarks>\n    ///     This is called immediately after BeforeDraw.\n    /// </remarks>\n    /// <param name="spriteBatch">\n    ///     The SpriteBatch instance used for rendering.\n    /// </param>\n    public virtual void Draw(SpriteBatch spriteBatch) { }\n\n    /// <summary>\n    ///     Handles ending any drawing the scene is performing.\n    /// </summary>\n    /// <remarks>\n    ///     This is called immediately after Draw.\n    /// </remarks>\n    /// <param name="spriteBatch">\n    ///     The SpriteBatch instance used for rendering.\n    /// </param>\n    public virtual void AfterDraw(SpriteBatch spriteBatch)\n    {\n        //  End the spritebatch\n        spriteBatch.End();\n    }\n}\n')),Object(i.b)("p",null,"As you can see, the stricture of it is pretty much the same as our Game1 class, with the exception of the two fields and the ",Object(i.b)("inlineCode",{parentName:"p"},"BeginDraw(SpriteBatch)")," and ",Object(i.b)("inlineCode",{parentName:"p"},"EndDraw(SpriteBatch)")," methods."),Object(i.b)("p",null,"So lets break this down section by section and discuss what each part of this is doing."),Object(i.b)("h3",{id:"fields"},"Fields"),Object(i.b)("p",null,"The Scene class has two fields; ",Object(i.b)("inlineCode",{parentName:"p"},"_game")," and ",Object(i.b)("inlineCode",{parentName:"p"},"_content"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"//  A cached reference to our Game instance.\nprotected Game1 _game;\n\n//  Used to load scene specific content\nprotected ContentManager _content;\n")),Object(i.b)("p",null,"We can use the ",Object(i.b)("inlineCode",{parentName:"p"},"_game")," field to access some of the usual stuff like ",Object(i.b)("inlineCode",{parentName:"p"},"Game1.GraphicsDevice"),".  This also allows us to set public fields/properties in our Game1 class and make them easily accessible from the Scene."),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"_content")," field will be used to load content that is specific to the Scene.  This will be a separate ",Object(i.b)("inlineCode",{parentName:"p"},"ContentManager")," instance from the one in the Game1 instance.  This has two benefits"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"All content loaded from the Game1 class will act as sort of global content manager, since it's accessible from any scene through ",Object(i.b)("inlineCode",{parentName:"li"},"_game.Content"),".  This would be assets like fonts and audio that would be used in multiple scenes."),Object(i.b)("li",{parentName:"ol"},"By each scene having its own content manager, this means we don't have to load every asset up front at runtime. Instead loading only the global stuff as to point #1 above, and then the scene specific stuff per scene. This means a smaller memory footprint throughout the game life cycle. ")),Object(i.b)("h3",{id:"constructor"},"Constructor"),Object(i.b)("p",null,"Next we'll take a look at the constructor"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Creates a new Scene instance.\n/// </summary>\n/// <param name="game">\n///     A reference to our Game1 instance.\n/// </param>\n/// <exception cref="ArgumentNullException">\n///     Thrown if the value supplied for <paramref name="game"/> \n///     is null\n/// </exception>\npublic Scene(Game1 game)\n{\n    if (game == null)\n    {\n        throw new ArgumentNullException(nameof(game), "Game cannot be null!");\n    }\n\n    _game = game;\n}\n')),Object(i.b)("p",null,"As far as constructors go, this a pretty simple one.  It takes an instance of Game1 as the only parameter.  An ",Object(i.b)("inlineCode",{parentName:"p"},"ArgumentNullException")," is thrown if the value given is ",Object(i.b)("inlineCode",{parentName:"p"},"null"),". From here we just cache the reference into the ",Object(i.b)("inlineCode",{parentName:"p"},"_game")," field."),Object(i.b)("h3",{id:"initialize"},"Initialize()"),Object(i.b)("p",null,"The Initialize method is where all initializations will be performed for our scene.  "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Initializes the Scene\n/// </summary>\n/// <remarks>\n///     This is called only once, immediately after the scene becomes\n///     the active scene, and before the first Update is called on \n///     the scene\n/// </remarks>\npublic virtual void Initialize()\n{\n    _content = new ContentManager(_game.Services);\n    _content.RootDirectory = _game.Content.RootDirectory;\n    LoadContent();\n}\n")),Object(i.b)("p",null,"An important thing to note is that this is where the ",Object(i.b)("inlineCode",{parentName:"p"},"_content")," field is initialized, and immediately the ",Object(i.b)("inlineCode",{parentName:"p"},"LoadContent()")," method is called.  This is to ensure that all content is loaded before the implementing scene initializes, mimicking the same way that the ",Object(i.b)("inlineCode",{parentName:"p"},"Game")," class is done in MonoGame.  We do this so any information about assets width, height, etc is available for any objects that need them when we initialize. "),Object(i.b)("p",null,"In the order of events, Initialize will be called on the same frame that the scene is set as the active scene, and before the first Update is called on the scene."),Object(i.b)("h3",{id:"loadcontent"},"LoadContent()"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"LoadContent()")," method is where all the content for the scene will be loaded.  "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Loads the content specific to the Scene.\n/// </summary>\n/// <remarks>\n///     This is called internally by the Initialize() method.\n/// </remarks>\npublic virtual void LoadContent() { }\n")),Object(i.b)("p",null,"As we went over in the Initialize section, ",Object(i.b)("inlineCode",{parentName:"p"},"LoadContent()")," is called from within the ",Object(i.b)("inlineCode",{parentName:"p"},"Initialize()")," method."),Object(i.b)("h3",{id:"unloadcontent"},"UnloadContent()"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"UnloadContent()")," allows us to dispose of any content loaded when the scene ends to ensure we clear any from memory that no longer needs to be there."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),"/// <summary>\n///     Unloads any content that has been loaded by the scene.\n/// </summary>\n/// <remarks>\n///     This will be called after the game switches to a new\n///     scene.\n/// </remarks>\npublic virtual void UnloadContent() \n{\n    _content.Unload();\n    _content = null;\n}\n")),Object(i.b)("p",null,"When we switch from one scene to another, ",Object(i.b)("inlineCode",{parentName:"p"},"UnloadContent")," will be called to free up any memory before the next scene is loaded."),Object(i.b)("h3",{id:"updategametime"},"Update(GameTime)"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"Update(GameTime)")," method is pretty simple. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Updates the Scene.\n/// </summary>\n/// <param name="gameTime">\n///     A snapshot of the frame specific timing values.\n/// </param>\npublic virtual void Update(GameTime gameTime) { }\n')),Object(i.b)("p",null,"We'll use this to handle all update logic for the scene."),Object(i.b)("h3",{id:"beforedrawspritbatch-color"},"BeforeDraw(SpritBatch, Color)"),Object(i.b)("p",null,"Here, in ",Object(i.b)("inlineCode",{parentName:"p"},"BeforeDraw(SpritBatch, Color)"),", we'll handle preparing the scene for rendering to the screen."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Handles preparing the Scene to draw.\n/// </summary>\n/// <remarks>\n///     This is called just before the main Draw method.\n/// </remarks>\n/// <param name="spriteBatch"></param>\npublic virtual void BeforeDraw(SpriteBatch spriteBatch, Color clearColor)\n{\n    //  Clear the backbuffer\n    _game.GraphicsDevice.Clear(clearColor);\n\n    //  Begin the spritebatch\n    spriteBatch.Begin();\n}\n')),Object(i.b)("p",null,"The method will take two parameters; A ",Object(i.b)("inlineCode",{parentName:"p"},"SpriteBatch")," instance and a ",Object(i.b)("inlineCode",{parentName:"p"},"Color")," value.  Next we clear the backbuffer using ",Object(i.b)("inlineCode",{parentName:"p"},"_game.GraphicsDevice.Clear(Color)"),", giving it the color value provided. Then we call ",Object(i.b)("inlineCode",{parentName:"p"},"spriteBatch.Begin()")," to get us started with rendering."),Object(i.b)("h3",{id:"drawspritebatch"},"Draw(SpriteBatch)"),Object(i.b)("p",null,"Immediately after ",Object(i.b)("inlineCode",{parentName:"p"},"BeforeDraw(SpriteBatch, Color)")," is call, we'll call ",Object(i.b)("inlineCode",{parentName:"p"},"Draw(SpriteBatch)")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Draws the Scene to the screen.\n/// </summary>\n/// <remarks>\n///     This is called immediately after BeforeDraw.\n/// </remarks>\n/// <param name="spriteBatch">\n///     The SpriteBatch instance used for rendering.\n/// </param>\npublic virtual void Draw(SpriteBatch spriteBatch) { }\n')),Object(i.b)("p",null,"This will take in the same ",Object(i.b)("inlineCode",{parentName:"p"},"SpriteBatch")," instance that we can use to rendering visual assets to the screen."),Object(i.b)("h3",{id:"afterdrawspritbatch"},"AfterDraw(SpritBatch)"),Object(i.b)("p",null,"Finally, we have ",Object(i.b)("inlineCode",{parentName:"p"},"AfterDraw(SpriteBatch)"),", which will be called immediately after ",Object(i.b)("inlineCode",{parentName:"p"},"Draw(SpriteBatch)")," is called."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-csharp"}),'/// <summary>\n///     Handles ending any drawing the scene is performing.\n/// </summary>\n/// <remarks>\n///     This is called immediately after Draw.\n/// </remarks>\n/// <param name="spriteBatch">\n///     The SpriteBatch instance used for rendering.\n/// </param>\npublic virtual void AfterDraw(SpriteBatch spriteBatch)\n{\n    //  End the spritebatch\n    spriteBatch.End();\n}\n')),Object(i.b)("p",null,"Here we just end the spritebatch."),Object(i.b)("p",null,"On the next page, we're going to update our ",Object(i.b)("inlineCode",{parentName:"p"},"Game1")," class to make use of the ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," class we just created."))}m.isMDXComponent=!0}}]);